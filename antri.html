<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mini Laundry</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://kit.fontawesome.com/91d51d03ee.js" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</head>

<body>
  <div id="navbar-placeholder"></div>
  <script>
    const navbarPlaceholder = document.getElementById('navbar-placeholder');
    const xhr = new XMLHttpRequest();
    xhr.open('GET', 'navbar.html', true);
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4 && xhr.status === 200) {
        navbarPlaceholder.innerHTML = xhr.responseText;
      }
    };
    xhr.send();
  </script>
  <div class="container-fluid dalneg">
    <a class="dalnegtx" href="javascript:history.back()"><i class="fa-solid fa-chevron-left" style="color: #030303;"></i>&ensp;Antrian</a>
  </div>
  <div class="container">
    <button class="floating-button" id="btn-tambah" onclick="window.location.href = 'tambahantri.php';"><i class="fa-solid fa-plus"></i></button>
    <div>
      <div class="container">
        <section class="data-antrian">
          <h1>Data Antrian Online</h1>
          <div id="antrian-container" class="container"></div>
          <hr>
          <h1>Data Antrian Self Servis</h1>
          <div id="self-servis-container" class="container"></div>
          <script>
            // Dummy 
            //deklarasi variabel antrianData sebagai array yang berisi data antrian.
            let antrianData = [{
                id: 1,
                nama: "John Doe",
                berat: 70,
                alamat: "Jl. Contoh No. 123",
                telepon: "08123456789",
                tanggal_daftar: "2024-04-03",
                status: "Proses"
              },
              {
                id: 2,
                nama: "Jane Smith",
                berat: 65,
                alamat: "Jl. Tes No. 456",
                telepon: "08543210987",
                tanggal_daftar: "2024-04-02",
                status: "Selesai"
              },
              {
                id: 3,
                nama: "Alice Johnson",
                berat: 80,
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                tanggal_daftar: "2024-04-01",
                status: "Proses"
              },
              {
                id: 4,
                nama: "Alice Johnson",
                berat: 80,
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                tanggal_daftar: "2024-04-01",
                status: "Proses"
              },
              {
                id: 5,
                nama: "Alice Johnson",
                berat: 80,
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                tanggal_daftar: "2024-04-01",
                status: "Proses"
              }
            ];

            // Berfungsi untuk menghasilkan kartu untuk setiap entri dalam data
            // Mendefinisikan sebuah fungsi bernama generateCards yang digunakan untuk menghasilkan kartu (card) 
            // untuk setiap entri dalam data antrian. Fungsi ini menerima parameter data, 
            // yang merupakan array yang berisi data antrian.
            function generateCards(data) {
              const container = document.getElementById("antrian-container");
              container.innerHTML = ""; // Clear previous content

              data.forEach(item => { //Melakukan iterasi melalui setiap entri dalam array data dan membuat kartu untuk masing-masingnya
                const card = document.createElement("div"); //Membuat sebuah elemen <div> baru untuk merepresentasikan kartu.
                card.classList.add("card"); //menambah elemen css kedalam card ke elemen div yang baru di buat

                card.innerHTML = `
                  <h3>ID: ${item.id}</h3>
                  <p>Nama: ${item.nama}</p>
                  <p>Berat: ${item.berat} kg</p>
                  <p>Alamat: ${item.alamat}</p>
                  <p>Telepon: ${item.telepon}</p>
                  <p>Tanggal Daftar: ${item.tanggal_daftar}</p>
                  <p>Status: ${item.status}</p>
                  <button class="btn edit" onclick="editData(${item.id})">Edit</button>
                  <button class="btn delete" onclick="deleteData(${item.id})">Selesai</button>
                `;

                container.appendChild(card); //Menambahkan elemen <div> (kartu) yang baru dibuat ke dalam container agar ditampilkan di halaman web
              });
            }

            // Function edit data
            function editData(id) { //enerima parameter id yang merupakan ID dari entri yang akan diubah.
              const index = antrianData.findIndex(item => item.id === id); //Mencari indeks dari entri antrian yang memiliki ID sesuai dengan nilai yang diberikan
              if (index !== -1) { //Memeriksa apakah entri dengan ID yang diberikan ditemukan dalam data antrian
                const newData = prompt("Masukkan data baru (id, nama, berat, alamat, telepon, tanggal_daftar, status), dipisahkan dengan koma (,)", `${antrianData[index].id},${antrianData[index].nama},${antrianData[index].berat},${antrianData[index].alamat},${antrianData[index].telepon},${antrianData[index].tanggal_daftar},${antrianData[index].status}`);
                //Menampilkan dialog prompt kepada pengguna untuk memasukkan data baru untuk entri yang dipilih. Data ini harus dimasukkan dalam format yang sesuai.
                if (newData) { //Memeriksa apakah pengguna telah memasukkan data baru atau membatalkan proses.
                  const newDataArray = newData.split(","); //Memisahkan string newData menjadi array menggunakan koma sebagai pemisah.
                  antrianData[index] = { // Mengganti entri yang sudah ada dengan data baru yang dimasukkan pengguna.
                    id: parseInt(newDataArray[0]),
                    nama: newDataArray[1],
                    berat: parseInt(newDataArray[2]),
                    alamat: newDataArray[3],
                    telepon: newDataArray[4],
                    tanggal_daftar: newDataArray[5],
                    status: newDataArray[6]
                  };
                  generateCards(antrianData); //Memanggil kembali fungsi generateCards untuk memperbarui tampilan kartu-kartu antrian setelah pengeditan dilakukan.
                }
              } else {
                alert("Data tidak ditemukan");
              }
            }

            // Function  delete data
            function deleteData(id) {
              const confirmation = confirm("Apakah Anda yakin?");
              if (confirmation) {
                antrianData = antrianData.filter(item => item.id !== id); //Menghapus entri dengan ID yang sesuai dari data antrian.


                generateCards(antrianData);
              }
            }

            // Memanggil fungsi generateCards untuk menghasilkan tampilan awal kartu-kartu antrian ketika halaman dimuat pertama kali.
            generateCards(antrianData);

            //self servis
            let selfServisData = [
              {
                id: 1,
                mesin: "Mesin A",
                nama: "",
                alamat: "",
                telepon: "",
                batas_waktu: "",
                status: "Kosong"
              },
              {
                id: 2,
                mesin: "Mesin B",
                nama: "Jane Smith",
                alamat: "Jl. Tes No. 456",
                telepon: "08543210987",
                batas_waktu: "2024-04-05",
                status: "Booking"
              },
              {
                id: 3,
                mesin: "Mesin C",
                nama: "Alice Johnson",
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                batas_waktu: "2024-04-06",
                status: "Diisi"
              },
              {
                id: 4,
                mesin: "Mesin D",
                nama: "",
                alamat: "",
                telepon: "",
                batas_waktu: "",
                status: "Kosong"
              },
              {
                id: 5,
                mesin: "Mesin E",
                nama: "",
                alamat: "",
                telepon: "",
                batas_waktu: "",
                status: "Kosong"
              },
              {
                id: 6,
                mesin: "Mesin F",
                nama: "Alice Johnson",
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                batas_waktu: "2024-04-06",
                status: "Diisi"
              },
              // Tambahkan data antrian self-servis sesuai kebutuhan
            ];

            // Fungsi untuk menghasilkan kartu untuk setiap entri dalam data antrian self-servis
            function generateSelfServisCards(data) {
  const container = document.getElementById("self-servis-container");
  container.innerHTML = ""; // Bersihkan konten sebelumnya

  data.forEach(item => {
    const card = document.createElement("div");
    card.classList.add("card");

    // Menentukan warna teks dan latar belakang berdasarkan status
    let textColor = "";
    let backgroundColor = "";
    switch (item.status) {
      case "Kosong":
        textColor = "white";
        backgroundColor = "#00834c";
        break;
      case "Booking":
        textColor = "white";
        backgroundColor = "#ffc107";
        break;
      case "Diisi":
        textColor = "white";
        backgroundColor = "red";
        break;
      default:
        textColor = "white";
        backgroundColor = "white";
    }

    card.innerHTML = `
      <h3>ID: ${item.id}</h3>
      <p>Mesin: ${item.mesin}</p>
      <p>Nama: ${item.nama}</p>
      <p>Alamat: ${item.alamat}</p>
      <p>Telepon: ${item.telepon}</p>
      <p>Batas Waktu: ${item.batas_waktu}</p>
      <p>Status: <span style="color: ${textColor}; background-color: ${backgroundColor};">${item.status}</span></p>
      <button class="btn edit" onclick="editSelfServisData(${item.id})">Edit</button>
      <button class="btn delete" onclick="deleteSelfServisData(${item.id})">Hapus</button>
    `;

    container.appendChild(card);
  });
}

            // Fungsi edit data antrian self-servis
            function editSelfServisData(id) {
              const index = selfServisData.findIndex(item => item.id === id);
              if (index !== -1) {
                const newData = prompt("Masukkan data baru (mesin, nama, alamat, telepon, batas_waktu, status), dipisahkan dengan koma (,)", `${selfServisData[index].mesin},${selfServisData[index].nama},${selfServisData[index].alamat},${selfServisData[index].telepon},${selfServisData[index].batas_waktu},${selfServisData[index].status}`);
                if (newData) {
                  const newDataArray = newData.split(",");
                  selfServisData[index] = {
                    id: id,
                    mesin: newDataArray[0],
                    nama: newDataArray[1],
                    alamat: newDataArray[2],
                    telepon: newDataArray[3],
                    batas_waktu: newDataArray[4],
                    status: newDataArray[5]
                  };
                  generateSelfServisCards(selfServisData);
                }
              } else {
                alert("Data tidak ditemukan");
              }
            }

            // Fungsi delete data antrian self-servis
            function deleteSelfServisData(id) {
              const confirmation = confirm("Apakah Anda yakin?");
              if (confirmation) {
                selfServisData = selfServisData.filter(item => item.id !== id);
                generateSelfServisCards(selfServisData);
              }
            }

            // Panggil fungsi generateSelfServisCards untuk menampilkan data antrian self-servis
            generateSelfServisCards(selfServisData);
          </script>
      </div>
    </div>

</body>

</html>