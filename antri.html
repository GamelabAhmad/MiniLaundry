<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mini Laundry</title>
  <link rel="stylesheet" type="text/css" href="style.css">
  <script src="https://kit.fontawesome.com/91d51d03ee.js" crossorigin="anonymous"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <style>
    /* Tambahkan margin atas dan bawah untuk container */
.container {
    margin-top: 50px;
    margin-bottom: 50px;
}

/* Tambahkan styling untuk card */
.card {
    width: 300px; /* Lebar kartu */
    margin: 10px; /* Jarak antara kartu */
    padding: 20px; /* Padding dalam kartu */
    background-color: #ffffff; /* Warna latar belakang kartu */
    box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2); /* Efek bayangan kartu */
    border-radius: 10px; /* Sudut melengkung kartu */
}

/* Tambahkan style untuk judul */
h1 {
    text-align: center; /* Tengahkan judul */
}

/* Tambahkan style untuk hr */
hr {
    margin-top: 20px; /* Jarak atas hr */
    margin-bottom: 20px; /* Jarak bawah hr */
}

  </style>
</head>

<body>
  <div id="navbar-placeholder"></div>
  <script>
    const navbarPlaceholder = document.getElementById('navbar-placeholder');
    const xhr = new XMLHttpRequest();
    xhr.open('GET', 'navbar.html', true);
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4 && xhr.status === 200) {
        navbarPlaceholder.innerHTML = xhr.responseText;
      }
    };
    xhr.send();
  </script>
  <div class="container-fluid dalneg mt-4"><br><br>                   
    <a class="dalnegtx" href="javascript:history.back()"><i class="fa-solid fa-chevron-left" style="color: #030303;">
</i>&ensp;Antrian</a>
</div>
  <div class="container" style="margin-top: -50px;">
    <button class="floating-button" id="btn-tambah" onclick="window.location.href = 'tambahantri.html';"><i class="fa-solid fa-plus"></i></button>
    <div><br>
      <div class="container">
        <section class="data-antrian">
            <h1 style="margin-bottom: 50px;">Status Mesin Self Servis</h1>
            <div id="self-servis-container" class="row justify-content-center"></div>
            <hr><br><br>
            <h1 style="margin-bottom: 50px;">Data Antrian</h1>
            <div id="antrian-container" class="row justify-content-center"></div>
          <script>
            // Dummy 
            //deklarasi variabel antrianData sebagai array yang berisi data antrian.
            let antrianData = [{
                id: 1,
                nama: "John Doe",
                berat: 70,
                alamat: "Jl. Contoh No. 123",
                telepon: "08123456789",
                tanggal_daftar: "2024-04-03",
                status: "Proses"
              },
              {
                id: 2,
                nama: "Jane Smith",
                berat: 65,
                alamat: "Jl. Tes No. 456",
                telepon: "08543210987",
                tanggal_daftar: "2024-04-02",
                status: "Selesai"
              },
              {
                id: 3,
                nama: "Alice Johnson",
                berat: 80,
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                tanggal_daftar: "2024-04-01",
                status: "Proses"
              },
              {
                id: 4,
                nama: "Alice Johnson",
                berat: 80,
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                tanggal_daftar: "2024-04-01",
                status: "Proses"
              },
              {
                id: 5,
                nama: "Alice Johnson",
                berat: 80,
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                tanggal_daftar: "2024-04-01",
                status: "Proses"
              }
            ];

            

            // Berfungsi untuk menghasilkan kartu untuk setiap entri dalam data
            // Mendefinisikan sebuah fungsi bernama generateCards yang digunakan untuk menghasilkan kartu (card) 
            // untuk setiap entri dalam data antrian. Fungsi ini menerima parameter data, 
            // yang merupakan array yang berisi data antrian.
            function generateCards(data) {
    const container = document.getElementById("antrian-container");
    container.innerHTML = ""; // Clear previous content

    data.forEach(item => { // Iterate through each entry in the data array and create a card for each
        const card = document.createElement("div"); // Create a new <div> element to represent the card
        card.classList.add("card"); // Add css class to the newly created div element

        let backgroundColor = ""; // Initialize background color variable
        let textColor = ""; // Initialize text color variable

        // Determine background color and text color based on status
        switch (item.status) {
            case "Proses":
                backgroundColor = "#ffc107"; // Yellow background for "Proses" status
                textColor = "#ffffff"; // White text color for "Proses" status
                break;
            case "Selesai":
                backgroundColor = "#28a745"; // Green background for "Selesai" status
                textColor = "#ffffff"; // White text color for "Selesai" status
                break;
            default:
                backgroundColor = "#ffffff"; // Default background color
                textColor = "#000000"; // Default text color
        }

        card.innerHTML = `
            <p>ID: ${item.id}</p>
            <h3>${item.nama}</h3>
            <p>Berat: ${item.berat} kg</p>
            <p>Alamat: ${item.alamat}</p>
            <p>Telepon: ${item.telepon}</p>
            <p>Tanggal Daftar: ${item.tanggal_daftar}</p>
            <p class="mb-4" style="background-color: ${backgroundColor}; color: ${textColor};">Status: ${item.status}</p>
            <button class="btn edit mb-2" onclick="editData(${item.id})">Edit</button>
            <button class="btn delete" onclick="deleteData(${item.id})">Selesai</button>
        `;

        container.appendChild(card); // Add the newly created <div> element (card) to the container to display it on the web page
    });
}


            // Function edit data
            function editData(id) { //enerima parameter id yang merupakan ID dari entri yang akan diubah.
              const index = antrianData.findIndex(item => item.id === id); //Mencari indeks dari entri antrian yang memiliki ID sesuai dengan nilai yang diberikan
              if (index !== -1) { //Memeriksa apakah entri dengan ID yang diberikan ditemukan dalam data antrian
                const newData = prompt("Masukkan data baru (id, nama, berat, alamat, telepon, tanggal_daftar, status), dipisahkan dengan koma (,)", `${antrianData[index].id},${antrianData[index].nama},${antrianData[index].berat},${antrianData[index].alamat},${antrianData[index].telepon},${antrianData[index].tanggal_daftar},${antrianData[index].status}`);
                //Menampilkan dialog prompt kepada pengguna untuk memasukkan data baru untuk entri yang dipilih. Data ini harus dimasukkan dalam format yang sesuai.
                if (newData) { //Memeriksa apakah pengguna telah memasukkan data baru atau membatalkan proses.
                  const newDataArray = newData.split(","); //Memisahkan string newData menjadi array menggunakan koma sebagai pemisah.
                  antrianData[index] = { // Mengganti entri yang sudah ada dengan data baru yang dimasukkan pengguna.
                    id: parseInt(newDataArray[0]),
                    nama: newDataArray[1],
                    berat: parseInt(newDataArray[2]),
                    alamat: newDataArray[3],
                    telepon: newDataArray[4],
                    tanggal_daftar: newDataArray[5],
                    status: newDataArray[6]
                  };
                  generateCards(antrianData); //Memanggil kembali fungsi generateCards untuk memperbarui tampilan kartu-kartu antrian setelah pengeditan dilakukan.
                }
              } else {
                alert("Data tidak ditemukan");
              }
            }

            // Function  delete data
            function deleteData(id) {
              const confirmation = confirm("Apakah Anda yakin?");
              if (confirmation) {
                antrianData = antrianData.filter(item => item.id !== id); //Menghapus entri dengan ID yang sesuai dari data antrian.


                generateCards(antrianData);
              }
            }

            // Memanggil fungsi generateCards untuk menghasilkan tampilan awal kartu-kartu antrian ketika halaman dimuat pertama kali.
            generateCards(antrianData);

          //self servis
          let selfServisData = [
              {
                mesin: "Mesin A",
                nama: "",
                alamat: "",
                telepon: "",
                batas_waktu: "",
                status: "Kosong"
              },
              {
                mesin: "Mesin B",
                nama: "Jane Smith",
                alamat: "Jl. Tes No. 456",
                telepon: "08543210987",
                batas_waktu: "2024-04-05",
                status: "Booked"
              },
              {
                mesin: "Mesin C",
                nama: "Alice Johnson",
                alamat: "Jl. Uji Coba No. 789",
                telepon: "08765432109",
                batas_waktu: "2024-04-06",
                status: "Booked"
              },
              {
                mesin: "Mesin D",
                nama: "",
                alamat: "",
                telepon: "",
                batas_waktu: "",
                status: "Kosong"
              },
              // Tambahkan data antrian self-servis sesuai kebutuhan
            ];

            // Fungsi untuk menghasilkan kartu untuk setiap entri dalam data antrian self-servis
            function generateSelfServisCards(data) {
  const container = document.getElementById("self-servis-container");
  container.innerHTML = ""; // Bersihkan konten sebelumnya

  data.forEach(item => {
    const card = document.createElement("div");
    card.classList.add("card");

    // Menentukan warna teks dan latar belakang berdasarkan status
    let textColor = "";
    let backgroundColor = "";
    switch (item.status) {
      case "Kosong":
        textColor = "white";
        backgroundColor = "#00834c";
        break;
      case "Booked":
        textColor = "white";
        backgroundColor = "red";
        break;
      case "Proses":
        textColor = "white";
        backgroundColor = "orange";
        break;
      default:
        textColor = "white";
        backgroundColor = "white";
    }

    card.innerHTML = `
      <h3>${item.mesin}</h3>
      <p>Nama: ${item.nama}</p>
      <p>Alamat: ${item.alamat}</p>
      <p>Telepon: ${item.telepon}</p>
      <p>Batas Waktu: ${item.batas_waktu}</p>
      <p>Status: <span style="color: ${textColor}; background-color: ${backgroundColor};">${item.status}</span></p>
      <button class="btn edit" onclick="editSelfServisData(${data.indexOf(item)})">Edit</button>
    `;

    container.appendChild(card);
  });
}

            // Fungsi edit data antrian self-servis
            function editSelfServisData(index) {
  if (index !== -1) {
    const newData = prompt("Masukkan data baru (mesin, nama, alamat, telepon, batas_waktu, status), dipisahkan dengan koma (,)", `${selfServisData[index].mesin},${selfServisData[index].nama},${selfServisData[index].alamat},${selfServisData[index].telepon},${selfServisData[index].batas_waktu},${selfServisData[index].status}`);
    if (newData) {
      const newDataArray = newData.split(",");
      selfServisData[index] = {
        mesin: newDataArray[0],
        nama: newDataArray[1],
        alamat: newDataArray[2],
        telepon: newDataArray[3],
        batas_waktu: newDataArray[4],
        status: newDataArray[5]
      };
      generateSelfServisCards(selfServisData);
    }
  } else {
    alert("Data tidak ditemukan");
  }
}


            // Fungsi delete data antrian self-servis
            function deleteSelfServisData(id) {
              const confirmation = confirm("Apakah Anda yakin?");
              if (confirmation) {
                selfServisData = selfServisData.filter(item => item.id !== id);
                generateSelfServisCards(selfServisData);
              }
            }

            // Panggil fungsi generateSelfServisCards untuk menampilkan data antrian self-servis
            generateSelfServisCards(selfServisData);
          </script>
      </div>
    </div>

</body>

</html>